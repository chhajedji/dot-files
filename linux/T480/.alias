#! /bin/bash
# This file includes all aliases and functions used regularly.

# General alias

alias ea="vim + $HOME/.alias"
alias ev="vim + $HOME/.vimrc"
alias ebp="vim + $HOME/.bashrc"
alias ep="vim + $HOME/.profile"
alias eec="vim + $HOME/.espconfig"
alias exr="vim + $HOME/.Xresources"
alias SX="xrdb $HOME/.Xresources"
alias SB="source $HOME/.bashrc"
alias SA="source $HOME/.alias"
alias p2="python"
alias p3="python3 -q"
alias v="vim +"
alias make="make -j32"
# alias make="colormake"       # `sudo apt install colormake` if not installed. NOTE: menuconfig was not navigatable with colormake
alias m="clear;echo 'make >/dev/null';make defconfig >/dev/null;make -j32 >/dev/null"
alias :q="exit"
alias pforce="git push --force-with-lease"    # force push with lease
alias eic="vim + $HOME/.config/i3/config"
alias eib="vim + $HOME/.config/i3/i3blocks.conf"
alias sdn="shutdown now"
alias update="sudo apt update"
alias upgrade="sudo apt upgrade"
alias clean="sudo apt clean"
alias autoclean="sudo apt autoclean"
alias autoremove="sudo apt autoremove"
alias copy='xclip -sel c'
alias te="xinput set-prop \"SynPS/2 Synaptics TouchPad\" \"Device Enabled\" 1"
alias td="xinput set-prop \"SynPS/2 Synaptics TouchPad\" \"Device Enabled\" 0"
alias me="xinput set-prop \"PixArt Lenovo USB Optical Mouse\" \"Device Enabled\" 1"
alias md="xinput set-prop \"PixArt Lenovo USB Optical Mouse\" \"Device Enabled\" 0"
alias open="xdg-open 2>/dev/null"

# functions

# `dict` will always open in less
meaning() { dict "$@" | less; }

# Update system smartly.
up-to-date() {
    sudo apt update
        if [ "$1" = -y ]; then
            sudo apt upgrade -y
            sudo apt autoremove -y
            exit
        else
            sudo apt upgrade
            sudo apt autoremove
            exit
        fi
        sudo apt autoclean
        sudo apt clean
}

# Combined mkdir and cd
mkcdir() { mkdir "$@" && cd "$@"; }

# Tree will open in less
tr() { tree -C "$@" | less -R; }

# Modified git diff
gd() { git diff --color=always "$@" | less -R; }

# Similarly modified git log
gl() { git log --color=always "$@" | less -R; }

# Display size summary in human readable format.
sz() { du -sh "$@"; }

# Default grep .c and .h files without list
cgrep() { grep --include='*.\.c' --include='*.\.h' "$@"; }

# Combined cd and ls for a directory or if file, open in Vim.
cds() { cd "$@" 2>/dev/null && ls -CF || vim + "$@"; }

# Process tree in less
ptr() { pstree "$@" | less; }

# # Build and move cscope and ctags database to $HOME/.cstags_dir
# csb() {
#     mkdir -p $HOME/.cstags_dir
#     if [ $1 ]; then
#         if [ $1 = '.' ]; then
#             target_dir="`basename $PWD`"
#         else
#             target_dir="`basename $1`"
#         fi
#         cd $1
#     else
#         target_dir="`basename $PWD`"
#     fi
#     cscope -Rb
#     ctags -R .
#     if [ -d $HOME/.cstags_dir/$target_dir ]; then
#         mv cscope.out tags $HOME/.cstags_dir/$target_dir/
#     else
#         mkdir -p $HOME/.cstags_dir/$target_dir
#         mv cscope.out tags $HOME/.cstags_dir/$target_dir/
#     fi
# }

# Add colors to man pages.
man() {
LESS_TERMCAP_md=$'\e[01;31m' \
LESS_TERMCAP_me=$'\e[0m' \
LESS_TERMCAP_se=$'\e[0m' \
LESS_TERMCAP_so=$'\e[01;44;33m' \
LESS_TERMCAP_ue=$'\e[0m' \
LESS_TERMCAP_us=$'\e[01;32m' \
command man "$@"
}

# alias for git
alias gitgraph="git log --graph --decorate --oneline --all"
alias gitb="git branch"
alias gitl="clear && git log --oneline"
alias s="git status"
alias sub="git submodule update --init --recursive --progress"
alias dinit="git submodule deinit --all -f"
alias gcm="git checkout master"

# Alias for opening files in less with default syntax hilighting. Run this alias to color files in less.
alias lesc='LESS="-R" LESSOPEN="|pygmentize -g %s" less'
